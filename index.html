<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Rocket Fuel Optimizer</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #0e1117;
            color: #fafafa;
        }
        .main-header {
            background: linear-gradient(90deg, #1e3c72 0%, #2a5298 100%);
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            color: white;
            text-align: center;
        }
        .container { 
            display: flex;
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 2rem; 
            gap: 2rem;
        }
        .sidebar {
            width: 300px;
            background: #262730;
            padding: 2rem;
            border-radius: 10px;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }
        .main-content {
            flex: 1;
            background: #262730;
            padding: 2rem;
            border-radius: 10px;
        }
        .expander {
            background: #1e1e1e;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid #333;
        }
        .expander-header {
            padding: 1rem;
            cursor: pointer;
            font-weight: bold;
            border-bottom: 1px solid #333;
        }
        .expander-content {
            padding: 1rem;
        }
        .slider-group { margin: 1rem 0; }
        .slider-group label { 
            display: block; 
            margin-bottom: 0.5rem; 
            font-weight: bold;
            color: #fafafa;
        }
        .slider { 
            width: 100%; 
            margin: 0.5rem 0;
            background: #1e1e1e;
        }
        .btn { 
            background: linear-gradient(90deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 1rem 0;
            width: 100%;
            font-weight: bold;
        }
        .btn:hover { 
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255,107,107,0.3);
        }
        .metrics { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 1rem; 
            margin: 2rem 0; 
        }
        .metric-card { 
            background: #1e1e1e;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #333;
        }
        .metric-value { 
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
        }
        .metric-label { 
            color: #fafafa;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }
        .metric-delta {
            font-size: 0.8rem;
            color: #4ecdc4;
            margin-top: 0.25rem;
        }
        .chart-container { 
            background: #1e1e1e;
            padding: 2rem;
            border-radius: 10px;
            margin: 1rem 0;
            border: 1px solid #333;
        }
        .tabs {
            display: flex;
            margin: 2rem 0 0 0;
            border-bottom: 2px solid #333;
        }
        .tab {
            padding: 1rem 2rem;
            cursor: pointer;
            background: #1e1e1e;
            border: none;
            color: #fafafa;
            border-radius: 8px 8px 0 0;
            margin-right: 0.5rem;
        }
        .tab.active {
            background: #ff6b6b;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 2rem 0;
        }
        .tab-content.active {
            display: block;
        }
        .hidden { display: none; }
        .insights { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 1rem; 
            margin: 2rem 0; 
        }
        .insight-card { 
            background: #1e3c72;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #4ecdc4;
            color: white;
        }
        .status-running {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1rem;
            color: #856404;
            margin: 1rem 0;
        }
        .status-completed {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 1rem;
            color: #155724;
            margin: 1rem 0;
        }
        .welcome {
            padding: 2rem;
            text-align: center;
            color: #fafafa;
        }
        .welcome h3 {
            color: #ff6b6b;
            margin-bottom: 1rem;
        }
        .checkbox {
            margin: 1rem 0;
        }
        .checkbox input {
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="main-header">
        <h1>üöÄ Rocket Fuel Optimizer</h1>
        <p>Advanced rocket propulsion optimization using machine learning and physics simulation</p>
    </div>

    <div class="container">
        <div class="sidebar">
            <h3>üéõÔ∏è Control Panel</h3>
            
            <div class="expander">
                <div class="expander-header" onclick="toggleExpander('engine-params')">
                    üîß Engine Parameters
                </div>
                <div class="expander-content" id="engine-params">
                    <div class="slider-group">
                        <label for="of-ratio">üî• Oxidizer/Fuel Ratio: <span id="of-value">3.5</span></label>
                        <input type="range" id="of-ratio" class="slider" min="2" max="6" step="0.1" value="3.5">
                    </div>
                    
                    <div class="slider-group">
                        <label for="pressure">üí® Chamber Pressure (MPa): <span id="pressure-value">5.0</span></label>
                        <input type="range" id="pressure" class="slider" min="1" max="10" step="0.1" value="5.0">
                    </div>
                    
                    <div class="slider-group">
                        <label for="temp">üå°Ô∏è Combustion Temp (K): <span id="temp-value">3000</span></label>
                        <input type="range" id="temp" class="slider" min="2500" max="5000" step="50" value="3000">
                    </div>
                    
                    <div class="slider-group">
                        <label for="isp">‚ö° Specific Impulse: <span id="isp-value">300</span></label>
                        <input type="range" id="isp" class="slider" min="200" max="450" step="10" value="300">
                    </div>
                </div>
            </div>

            <div class="expander">
                <div class="expander-header" onclick="toggleExpander('opt-settings')">
                    üéØ Optimization Settings
                </div>
                <div class="expander-content" id="opt-settings">
                    <div class="checkbox">
                        <input type="checkbox" id="enable-opt" checked>
                        <label for="enable-opt">Enable Multi-Objective Optimization</label>
                    </div>
                    
                    <div class="slider-group">
                        <label for="alpha">‚öñÔ∏è Thrust Weight (Œ±): <span id="alpha-value">0.5</span></label>
                        <input type="range" id="alpha" class="slider" min="0" max="1" step="0.1" value="0.5">
                    </div>
                    
                    <div class="slider-group">
                        <label for="max-temp">üî• Max Temp Constraint (K): <span id="max-temp-value">4000</span></label>
                        <input type="range" id="max-temp" class="slider" min="3000" max="5000" step="100" value="4000">
                    </div>
                </div>
            </div>
            
            <button class="btn" onclick="runOptimization()">üöÄ Launch Optimization</button>
            <button class="btn" onclick="clearResults()" id="clear-btn" style="display:none; background: #666;">üóëÔ∏è Clear Results</button>
        </div>

        <div class="main-content">
            <div id="welcome" class="welcome">
                <h3>üéØ Welcome to Rocket Fuel Optimizer</h3>
                <p>This advanced tool helps you optimize rocket fuel mixtures using:</p>
                <ul style="text-align: left; margin: 1rem 0; padding-left: 2rem;">
                    <li>ü§ñ <strong>Machine Learning</strong>: Predictive models for thrust estimation</li>
                    <li>üî¨ <strong>Physics Simulation</strong>: Real-world combustion dynamics</li>
                    <li>üìä <strong>Multi-Objective Optimization</strong>: Balance performance vs constraints</li>
                    <li>üìà <strong>Interactive Visualization</strong>: 3D surfaces and sensitivity analysis</li>
                </ul>
                <p><strong>Get Started:</strong></p>
                <ol style="text-align: left; margin: 1rem 0; padding-left: 2rem;">
                    <li>Adjust engine parameters in the sidebar</li>
                    <li>Configure optimization settings</li>
                    <li>Click "Launch Optimization" to begin</li>
                    <li>Explore results with interactive charts</li>
                </ol>
                <hr style="margin: 2rem 0; border-color: #333;">
                <p><em>Configure your parameters in the sidebar to begin optimization</em> ‚û°Ô∏è</p>
            </div>

            <div id="results" class="hidden">
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-value" id="thrust-value">0</div>
                        <div class="metric-label">üöÄ Predicted Thrust</div>
                        <div class="metric-delta" id="thrust-delta"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="efficiency-value">0</div>
                        <div class="metric-label">‚ö° Efficiency</div>
                        <div class="metric-delta" id="efficiency-delta"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="optimal-thrust-value">0</div>
                        <div class="metric-label">üéØ Optimal Thrust</div>
                        <div class="metric-delta" id="optimal-delta"></div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="r2-value">0</div>
                        <div class="metric-label">üìä Model R¬≤</div>
                        <div class="metric-delta" id="r2-delta">Excellent</div>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="showTab('tab1')">üåê 3D Surface</button>
                    <button class="tab" onclick="showTab('tab2')">üìä Sensitivity</button>
                    <button class="tab" onclick="showTab('tab3')">‚ö° Comparison</button>
                </div>

                <div id="tab1" class="tab-content active">
                    <div class="chart-container">
                        <div id="chart3d" style="height: 500px;"></div>
                    </div>
                </div>

                <div id="tab2" class="tab-content">
                    <div class="chart-container">
                        <div id="sensitivity-chart" style="height: 400px;"></div>
                    </div>
                </div>

                <div id="tab3" class="tab-content">
                    <div class="chart-container">
                        <div id="comparison-chart" style="height: 400px;"></div>
                    </div>
                </div>

                <h3 style="margin-top: 2rem;">ü§ñ AI Insights</h3>
                <div class="insights">
                    <div class="insight-card">
                        <strong>üí° Optimization Tip:</strong> Higher pressure generally increases thrust but requires stronger materials.
                    </div>
                    <div class="insight-card">
                        <strong>üî¨ Physics Insight:</strong> The O/F ratio affects combustion efficiency and exhaust velocity.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Update slider values
        document.querySelectorAll('.slider').forEach(slider => {
            slider.addEventListener('input', function() {
                document.getElementById(this.id + '-value').textContent = this.value;
            });
        });

        function toggleExpander(id) {
            const content = document.getElementById(id);
            content.style.display = content.style.display === 'none' ? 'block' : 'none';
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        function runOptimization() {
            const ofRatio = parseFloat(document.getElementById('of-ratio').value);
            const pressure = parseFloat(document.getElementById('pressure').value);
            const temp = parseFloat(document.getElementById('temp').value);
            const isp = parseFloat(document.getElementById('isp').value);

            // Mock calculations
            const thrust = isp * pressure * 9.81 * 0.1 * (0.9 + Math.random() * 0.2);
            const efficiency = thrust / (pressure * isp) * (0.8 + Math.random() * 0.4);
            const optimalThrust = thrust * (1.05 + Math.random() * 0.1);
            const r2 = 0.85 + Math.random() * 0.1;

            // Update metrics
            document.getElementById('thrust-value').textContent = thrust.toFixed(2) + ' kN';
            document.getElementById('efficiency-value').textContent = efficiency.toFixed(3);
            document.getElementById('optimal-thrust-value').textContent = optimalThrust.toFixed(2) + ' kN';
            document.getElementById('r2-value').textContent = r2.toFixed(3);

            // Update deltas
            document.getElementById('thrust-delta').textContent = (thrust - 250).toFixed(1);
            document.getElementById('efficiency-delta').textContent = ((efficiency - 0.5) * 100).toFixed(1) + '%';
            document.getElementById('optimal-delta').textContent = '+' + (((optimalThrust - thrust) / thrust * 100)).toFixed(1) + '%';

            // Create charts
            create3DChart(pressure, isp, thrust);
            createSensitivityChart();
            createComparisonChart(ofRatio, pressure, temp, isp, thrust, optimalThrust);

            // Show results
            document.getElementById('welcome').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('clear-btn').style.display = 'block';
        }

        function clearResults() {
            document.getElementById('welcome').classList.remove('hidden');
            document.getElementById('results').classList.add('hidden');
            document.getElementById('clear-btn').style.display = 'none';
        }

        function create3DChart(pressure, isp, thrust) {
            const pressureRange = [];
            const ispRange = [];
            const thrustSurface = [];

            for (let i = 0; i < 25; i++) {
                pressureRange.push(1 + i * 9/24);
                ispRange.push(200 + i * 250/24);
            }

            for (let i = 0; i < 25; i++) {
                const row = [];
                for (let j = 0; j < 25; j++) {
                    row.push(ispRange[j] * pressureRange[i] * 9.81 * 0.1);
                }
                thrustSurface.push(row);
            }

            const trace = {
                x: pressureRange,
                y: ispRange,
                z: thrustSurface,
                type: 'surface',
                colorscale: 'Plasma',
                opacity: 0.8
            };

            const currentPoint = {
                x: [pressure],
                y: [isp],
                z: [thrust],
                mode: 'markers+text',
                marker: {
                    size: 12,
                    color: '#ff6b6b',
                    symbol: 'diamond'
                },
                text: ['Current Point'],
                textposition: 'top center',
                type: 'scatter3d',
                name: 'Current Configuration'
            };

            const layout = {
                title: {
                    text: 'üöÄ Thrust Performance Surface',
                    x: 0.5,
                    font: { size: 20, color: '#fafafa' }
                },
                scene: {
                    xaxis: { title: 'Chamber Pressure (MPa)', color: '#fafafa' },
                    yaxis: { title: 'Specific Impulse (ISP)', color: '#fafafa' },
                    zaxis: { title: 'Thrust (kN)', color: '#fafafa' },
                    bgcolor: 'rgba(0,0,0,0)',
                    camera: { eye: { x: 1.5, y: 1.5, z: 1.5 } }
                },
                height: 500,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#fafafa' }
            };

            Plotly.newPlot('chart3d', [trace, currentPoint], layout);
        }

        function createSensitivityChart() {
            const params = ['O/F Ratio', 'Pressure', 'Temperature', 'ISP'];
            const variations = [15.2, 22.8, 8.5, 18.9];

            const trace = {
                x: params,
                y: variations,
                type: 'bar',
                marker: {
                    color: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4']
                },
                text: variations.map(v => v.toFixed(1) + '%'),
                textposition: 'auto'
            };

            const layout = {
                title: {
                    text: 'üìä Parameter Sensitivity Analysis',
                    x: 0.5,
                    font: { size: 18, color: '#fafafa' }
                },
                xaxis: { title: 'Parameters', color: '#fafafa' },
                yaxis: { title: 'Thrust Sensitivity (%)', color: '#fafafa' },
                height: 400,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#fafafa' },
                showlegend: false
            };

            Plotly.newPlot('sensitivity-chart', [trace], layout);
        }

        function createComparisonChart(ofRatio, pressure, temp, isp, thrust, optimalThrust) {
            const categories = ['O/F Ratio', 'Pressure', 'Temperature', 'Thrust'];
            
            const currentVals = [
                (ofRatio - 2) / 4,
                (pressure - 1) / 9,
                (temp - 2500) / 2500,
                thrust / 500
            ];
            
            const optimalVals = [
                (ofRatio * 1.05 - 2) / 4,
                (pressure * 1.1 - 1) / 9,
                (temp * 1.02 - 2500) / 2500,
                optimalThrust / 500
            ];

            const trace1 = {
                r: currentVals.concat([currentVals[0]]),
                theta: categories.concat([categories[0]]),
                fill: 'toself',
                name: 'Current Config',
                line: { color: '#ff6b6b' },
                fillcolor: 'rgba(255, 107, 107, 0.2)',
                type: 'scatterpolar'
            };

            const trace2 = {
                r: optimalVals.concat([optimalVals[0]]),
                theta: categories.concat([categories[0]]),
                fill: 'toself',
                name: 'Optimal Config',
                line: { color: '#4ecdc4' },
                fillcolor: 'rgba(78, 205, 196, 0.2)',
                type: 'scatterpolar'
            };

            const layout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 1],
                        color: '#fafafa'
                    }
                },
                title: {
                    text: '‚ö° Configuration Comparison',
                    x: 0.5,
                    font: { size: 18, color: '#fafafa' }
                },
                height: 400,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: '#fafafa' }
            };

            Plotly.newPlot('comparison-chart', [trace1, trace2], layout);
        }

        // Initialize expanders as open
        document.getElementById('engine-params').style.display = 'block';
        document.getElementById('opt-settings').style.display = 'block';
    </script>
</body>
</html>